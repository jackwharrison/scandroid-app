âœ… Project: Scandroid FSP Offline Validation App
Youâ€™ve built a Flask-based application designed for Financial Service Providers (FSPs) to securely access, sync, and validate beneficiary data offline, based on Kobo registration data and 121 Platform transactions.

ğŸ§  Current Functionality
ğŸ” FSP Login Flow
FSPs access the /fsp-login page.

Credentials (username/password) are hardcoded in config.py under:

python
Copy
Edit
FSP_USERNAME = "fspadmin"
FSP_PASSWORD = "fspsecure123"
On successful login, they're redirected to /fsp-admin.

ğŸ§­ FSP Admin Dashboard
The page /fsp-admin:

Displays a branded, multilingual interface.

Has a "Sync Latest Records" button.

Triggers a backend sync by running offline_sync.py using subprocess.

Displays a user-friendly message such as:

arduino
Copy
Edit
âœ… 124 beneficiaries ready for offline validation.
ğŸ§¹ Logout Function
A Logout button is present on /fsp-admin and redirects users to /fsp-login, clearing the session.

ğŸ§° Offline Cache Functionality (offline_sync.py)
ğŸ”„ How Sync Works
Loads config from system_config.json.

Pulls:

Transactions from 121 Platform.

Kobo submissions using _uuid.

For each beneficiary:

Retrieves fields specified in display_config.json.

Encrypts each value using Fernet symmetric encryption.

Downloads and encrypts the beneficiary photo.

ğŸ“‚ File Structure
Offline cache is saved to:

r
Copy
Edit
/offline-cache/payment-{ID}-batch-{#}/
â”œâ”€â”€ photos/
â”‚   â”œâ”€â”€ {uuid}.enc   <- encrypted photo
â””â”€â”€ registrations_cache.json <- encrypted field data
ğŸ” Encryption Details
A symmetric key (Fernet) is stored in system_config.json as ENCRYPTION_KEY.

All sensitive data (names, phones, etc.) + photo files are encrypted.

Opaque protection: FSPs canâ€™t view the files directly â€” even if they dig into their device.

ğŸ§¾ Key Files in Use
Here are the files that have been touched or are part of the current setup:

app.py â€” the main Flask app handling routes, session, login, and sync

offline_sync.py â€” downloads + encrypts all cache data and photos

config.py â€” stores admin/FSP credentials and helpers

system_config.json â€” stores API credentials, IDs, and the encryption key

display_config.json â€” defines which fields to cache and which photo field to use

/templates/fsp_login.html â€” FSP login page

/templates/fsp_admin.html â€” Admin dashboard

/static/ â€” Contains logos and the Scandroid banner

ğŸ—“ï¸ Next Steps for Monday
You can simply say:

"Hi, can you pick up from where we left off with the Scandroid FSP app? Here's my app.py."

That will be enough context to continue. Iâ€™ll ask for any missing files (like system_config.json, etc.) if needed.

Let me know Monday morning what youâ€™d like to do next â€” e.g., rendering encrypted images, decrypting on frontend, adding audit logging, or making it production-ready.

Have a well-earned weekend.








